<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test Dashboard | Verity</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0f;
            color: #fff;
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container { max-width: 1200px; margin: 0 auto; }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #22d3ee, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: rgba(255,255,255,0.6);
            margin-bottom: 2rem;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }
        
        .card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 1.5rem;
        }
        
        .card h2 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
        }
        
        .status-item .name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-item .rank {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.4);
            width: 24px;
        }
        
        .status-item .badge {
            padding: 0.25rem 0.5rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge.active {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }
        
        .badge.inactive {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }
        
        .badge.free {
            background: rgba(34, 211, 238, 0.2);
            color: #22d3ee;
        }
        
        .elo {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.5);
        }
        
        .accuracy-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #22d3ee);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .test-section {
            margin-top: 2rem;
        }
        
        .test-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        
        .test-input:focus {
            outline: none;
            border-color: #8b5cf6;
        }
        
        .test-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #8b5cf6, #22d3ee);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }
        
        .result-box {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            display: none;
        }
        
        .result-box.show { display: block; }
        
        .result-verdict {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .result-verdict.true { color: #34d399; }
        .result-verdict.false { color: #f87171; }
        .result-verdict.partial { color: #fbbf24; }
        
        .implementation-card {
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        
        .code-block {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin-top: 1rem;
        }
        
        .code-block .comment { color: #6b7280; }
        .code-block .keyword { color: #c084fc; }
        .code-block .string { color: #34d399; }
        .code-block .function { color: #60a5fa; }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #22d3ee, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.5);
            margin-top: 0.25rem;
        }
        
        @media (max-width: 768px) {
            .summary-stats { grid-template-columns: repeat(2, 1fr); }
            .nav-links { display: none; }
        }
        
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1rem 2rem;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #22d3ee, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-links a {
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover { color: #22d3ee; }
        
        .nav-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #22d3ee, #8b5cf6);
            border-radius: 8px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="index.html" class="nav-logo">verity.</a>
        <div class="nav-links">
            <a href="verify.html">Verify</a>
            <a href="tools.html">Tools</a>
            <a href="global-stream.html">Live Stream</a>
            <a href="pricing.html">Pricing</a>
            <a href="api-docs.html">API</a>
        </div>
        <a href="dashboard.html" class="nav-btn">Dashboard</a>
    </nav>
    
    <div class="container" style="padding-top: 5rem;">
        <h1>üî¨ API Test Dashboard</h1>
        <p class="subtitle">Real-time status of all verification resources</p>
        
        <!-- Summary Stats -->
        <div class="summary-stats">
            <div class="stat-card">
                <div class="stat-value">20+</div>
                <div class="stat-label">Total APIs</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">13</div>
                <div class="stat-label">Active Now</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">21-Point</div>
                <div class="stat-label">Verification</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">‚úÖ</div>
                <div class="stat-label">All Systems Go</div>
            </div>
        </div>
        
        <div class="grid">
            <!-- LM Arena Card -->
            <div class="card">
                <h2>üèÜ LM Arena Leaderboard</h2>
                <p style="color: rgba(255,255,255,0.5); font-size: 0.85rem; margin-bottom: 1rem;">
                    Top models ranked by ELO from LMSYS Chatbot Arena
                </p>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="name"><span class="rank">1</span> GPT-4o</div>
                        <span class="elo">ELO: 1287</span>
                        <span class="badge inactive">Needs Key</span>
                    </div>
                    <div class="status-item">
                        <div class="name"><span class="rank">2</span> Claude-3.5-Sonnet</div>
                        <span class="elo">ELO: 1282</span>
                        <span class="badge inactive">Needs Key</span>
                    </div>
                    <div class="status-item">
                        <div class="name"><span class="rank">4</span> Llama-3.1-405B</div>
                        <span class="elo">ELO: 1266</span>
                        <span class="badge inactive">Needs Key</span>
                    </div>
                    <div class="status-item">
                        <div class="name"><span class="rank">11</span> DeepSeek-V3</div>
                        <span class="elo">ELO: 1224</span>
                        <span class="badge inactive">Needs Key</span>
                    </div>
                    <div class="status-item">
                        <div class="name"><span class="rank">12</span> GLM-4-Plus</div>
                        <span class="elo">ELO: 1218</span>
                        <span class="badge inactive">Needs Key</span>
                    </div>
                </div>
            </div>
            
            <!-- Free APIs Card -->
            <div class="card">
                <h2>üÜì Free APIs (No Key Required)</h2>
                <p style="color: rgba(255,255,255,0.5); font-size: 0.85rem; margin-bottom: 1rem;">
                    Always available, unlimited access
                </p>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="name">üìñ Wikipedia</div>
                        <span class="badge free">Encyclopedia</span>
                    </div>
                    <div class="status-item">
                        <div class="name">üîó Wikidata</div>
                        <span class="badge free">Structured Data</span>
                    </div>
                    <div class="status-item">
                        <div class="name">üéì Semantic Scholar</div>
                        <span class="badge free">Academic</span>
                    </div>
                    <div class="status-item">
                        <div class="name">üè• PubMed</div>
                        <span class="badge free">Medical</span>
                    </div>
                    <div class="status-item">
                        <div class="name">üìÑ arXiv</div>
                        <span class="badge free">Research</span>
                    </div>
                    <div class="status-item">
                        <div class="name">üîñ CrossRef</div>
                        <span class="badge free">Citations</span>
                    </div>
                    <div class="status-item">
                        <div class="name">üì∞ GDELT</div>
                        <span class="badge free">News Events</span>
                    </div>
                </div>
            </div>
            
            <!-- GLM-4 Implementation -->
            <div class="card implementation-card">
                <h2>üá®üá≥ GLM-4 Implementation</h2>
                <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
                    Zhipu AI's flagship model with 128K context window. Excellent for multilingual fact-checking.
                </p>
                <div class="code-block">
<span class="keyword">class</span> <span class="function">GLM4Provider</span>:
    <span class="comment"># API endpoint</span>
    base_url = <span class="string">"https://open.bigmodel.cn/api/paas/v4/chat/completions"</span>
    
    <span class="comment"># Model configuration</span>
    model = <span class="string">"glm-4-plus"</span>
    
    <span class="comment"># Features:</span>
    <span class="comment"># ‚Ä¢ 128K context window</span>
    <span class="comment"># ‚Ä¢ Excellent Chinese support</span>
    <span class="comment"># ‚Ä¢ Strong reasoning</span>
    <span class="comment"># ‚Ä¢ JSON output mode</span>
                </div>
                <div style="margin-top: 1rem;">
                    <strong>Set API Key:</strong>
                    <code style="background: rgba(0,0,0,0.3); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.85rem;">
                        ZHIPU_API_KEY=your_key
                    </code>
                </div>
            </div>
            
            <!-- LM Arena Implementation -->
            <div class="card implementation-card">
                <h2>üèÜ LM Arena Implementation</h2>
                <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
                    Comprehensive integration with LMSYS Chatbot Arena's top-ranked models.
                </p>
                <div class="code-block">
<span class="keyword">class</span> <span class="function">LMArenaClient</span>:
    <span class="comment"># Features:</span>
    <span class="comment"># ‚Ä¢ 15 top-ranked models</span>
    <span class="comment"># ‚Ä¢ ELO-based selection</span>
    <span class="comment"># ‚Ä¢ Model battles</span>
    <span class="comment"># ‚Ä¢ Consensus voting</span>
    
    <span class="keyword">async def</span> <span class="function">consensus_verify</span>(claim, num_models=3):
        <span class="comment"># Run multiple models in parallel</span>
        <span class="comment"># Calculate ELO-weighted confidence</span>
        <span class="comment"># Return majority verdict</span>
        
    <span class="keyword">async def</span> <span class="function">battle</span>(claim, model_a, model_b):
        <span class="comment"># Arena-style comparison</span>
        <span class="comment"># Winner by confidence + ELO</span>
                </div>
            </div>
        </div>
        
        <!-- Live Test Section -->
        <div class="test-section">
            <div class="card">
                <h2>üß™ Live API Test</h2>
                <p style="color: rgba(255,255,255,0.5); margin-bottom: 1rem;">
                    Test the free Wikipedia API (no key required)
                </p>
                <input type="text" class="test-input" id="testClaim" 
                       placeholder="Enter a claim to verify (e.g., 'The Earth is round')">
                <button class="test-btn" onclick="testAPI()">Test Wikipedia API</button>
                
                <div class="result-box" id="resultBox">
                    <div class="result-verdict" id="resultVerdict"></div>
                    <div id="resultDetails" style="color: rgba(255,255,255,0.7);"></div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div style="margin-top: 2rem; text-align: center;">
            <a href="tools.html" style="color: #22d3ee; margin-right: 2rem;">‚Üê Back to Tools</a>
            <a href="verify.html" style="color: #8b5cf6;">Try Full Verification ‚Üí</a>
        </div>
    </div>
    
    <script>
        async function testAPI() {
            const claim = document.getElementById('testClaim').value;
            if (!claim) {
                alert('Please enter a claim to verify');
                return;
            }
            
            const resultBox = document.getElementById('resultBox');
            const resultVerdict = document.getElementById('resultVerdict');
            const resultDetails = document.getElementById('resultDetails');
            
            resultBox.classList.add('show');
            resultVerdict.textContent = '‚è≥ Searching Wikipedia...';
            resultVerdict.className = 'result-verdict';
            resultDetails.textContent = '';
            
            try {
                // Search Wikipedia
                const searchUrl = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(claim)}&format=json&origin=*`;
                const response = await fetch(searchUrl);
                const data = await response.json();
                
                if (data.query && data.query.search && data.query.search.length > 0) {
                    const results = data.query.search;
                    resultVerdict.textContent = '‚úÖ Evidence Found';
                    resultVerdict.className = 'result-verdict true';
                    
                    let details = `<strong>Found ${results.length} relevant articles:</strong><br><br>`;
                    results.slice(0, 3).forEach((r, i) => {
                        details += `${i + 1}. <strong>${r.title}</strong><br>`;
                        details += `<span style="font-size: 0.85rem; color: rgba(255,255,255,0.5);">${r.snippet.replace(/<[^>]*>/g, '')}...</span><br><br>`;
                    });
                    resultDetails.innerHTML = details;
                } else {
                    resultVerdict.textContent = '‚ùì No Direct Evidence';
                    resultVerdict.className = 'result-verdict partial';
                    resultDetails.textContent = 'No Wikipedia articles found matching this claim. Try rephrasing or use the full verification engine.';
                }
            } catch (error) {
                resultVerdict.textContent = '‚ùå Error';
                resultVerdict.className = 'result-verdict false';
                resultDetails.textContent = 'Failed to query Wikipedia: ' + error.message;
            }
        }
        
        // Allow Enter key to test
        document.getElementById('testClaim').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') testAPI();
        });
    </script>
</body>
</html>
