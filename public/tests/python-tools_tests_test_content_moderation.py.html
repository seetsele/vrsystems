<!doctype html><html><head><meta charset="utf-8"><title>Tests: python-tools\tests\test_content_moderation.py</title><link rel="stylesheet" href="tests.css"></head><body><div class="wrap"><h1>Tests: python-tools\tests\test_content_moderation.py</h1><p><a href="index.html">Back to tests index</a></p><div class="items"><h2>Test functions</h2><ul><li>test_content_moderation_api_or_doc</li></ul><h3>Markers / Types</h3><ul><li>marker: integration</li><li>type: integration</li></ul></div><h2>Source</h2><pre class="source">import pytest
import os
try:
    import requests
except Exception:
    requests = None


@pytest.mark.integration
def test_content_moderation_api_or_doc():
    &quot;&quot;&quot;Ensure content moderation endpoint or docs exist.&quot;&quot;&quot;
    doc = os.path.join(os.path.dirname(__file__), &#x27;..&#x27;, &#x27;..&#x27;, &#x27;public&#x27;, &#x27;content-moderation.html&#x27;)
    if os.path.exists(doc):
        assert True
        return
    if requests is None:
        pytest.skip(&#x27;requests not installed and doc missing&#x27;)
    try:
        r = requests.post(&#x27;http://127.0.0.1:8000/api/moderate&#x27;, json={&#x27;text&#x27;:&#x27;test&#x27;})
        assert r.status_code in (200, 202)
    except requests.exceptions.ConnectionError:
        pytest.skip(&#x27;Moderation API not reachable&#x27;)
</pre></div></body></html>