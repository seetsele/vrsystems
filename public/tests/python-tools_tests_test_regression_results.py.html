<!doctype html><html><head><meta charset="utf-8"><title>Tests: python-tools\tests\test_regression_results.py</title><link rel="stylesheet" href="tests.css"></head><body><div class="wrap"><h1>Tests: python-tools\tests\test_regression_results.py</h1><p><a href="index.html">Back to tests index</a></p><div class="items"><h2>Test functions</h2><ul><li>test_regression_matches_expected</li></ul></div><h2>Source</h2><pre class="source">import json
import os


def test_regression_matches_expected():
    path = os.path.join(os.path.dirname(__file__), &#x27;..&#x27;, &#x27;regression_results.json&#x27;)
    path = os.path.abspath(path)
    assert os.path.exists(path), f&quot;regression results not found at {path}&quot;
    with open(path, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as f:
        data = json.load(f)

    for r in data.get(&#x27;runs&#x27;, []):
        expected = r.get(&#x27;expected&#x27;)
        resp = r.get(&#x27;response&#x27;)
        if not resp:
            # If no response, fail
            assert False, f&quot;No response for {r.get(&#x27;id&#x27;)}&quot;
        actual = resp.get(&#x27;verdict&#x27;)
        # allow some tolerance: tests pass if actual == expected or expected == &#x27;mixed&#x27; and actual in (&#x27;mixed&#x27;,&#x27;mostly_true&#x27;,&#x27;mostly_false&#x27;)
        if expected == &#x27;mixed&#x27;:
            assert actual in (&#x27;mixed&#x27;, &#x27;mostly_true&#x27;, &#x27;mostly_false&#x27;, &#x27;true&#x27;, &#x27;false&#x27;), f&quot;{r.get(&#x27;id&#x27;)} expected mixed got {actual}&quot;
        else:
            assert actual == expected, f&quot;{r.get(&#x27;id&#x27;)} expected {expected} got {actual}&quot;
</pre></div></body></html>