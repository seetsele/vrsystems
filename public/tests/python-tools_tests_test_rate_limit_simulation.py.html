<!doctype html><html><head><meta charset="utf-8"><title>Tests: python-tools\tests\test_rate_limit_simulation.py</title><link rel="stylesheet" href="tests.css"></head><body><div class="wrap"><h1>Tests: python-tools\tests\test_rate_limit_simulation.py</h1><p><a href="index.html">Back to tests index</a></p><div class="items"><h2>Test functions</h2><ul><li>test_rate_limiter_blocks_after_limit</li></ul><h3>Markers / Types</h3><ul><li>marker: unit</li><li>type: unit</li></ul></div><h2>Source</h2><pre class="source">import pytest


class SimpleRateLimiter:
    def __init__(self, max_calls):
        self.max_calls = max_calls
        self.count = 0

    def allow(self):
        if self.count &gt;= self.max_calls:
            return False
        self.count += 1
        return True


@pytest.mark.unit
def test_rate_limiter_blocks_after_limit():
    r = SimpleRateLimiter(3)
    assert r.allow()
    assert r.allow()
    assert r.allow()
    assert not r.allow()
</pre></div></body></html>