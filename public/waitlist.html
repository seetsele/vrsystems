<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join the Waitlist | Verity</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,300;0,6..72,400;0,6..72,500;0,6..72,600;1,6..72,400&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#0a0a0b;--card:#111113;--elevated:#18181b;--border:rgba(255,255,255,0.06);--text:#fafafa;--muted:#a3a3a3;--dim:#525252;--amber:#f59e0b;--amber-soft:rgba(245,158,11,0.12);--gold:#fbbf24;--green:#10b981;--green-soft:rgba(16,185,129,0.12);--violet:#8b5cf6}
        body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;line-height:1.6;overflow-x:hidden}
        ::selection{background:rgba(245,158,11,0.3)}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
        @keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.05)}}
        @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
        
        .ambient-bg{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
        .ambient-orb{position:absolute;border-radius:50%;filter:blur(120px)}
        .orb-1{width:800px;height:800px;background:radial-gradient(circle,rgba(245,158,11,0.15) 0%,transparent 70%);top:-300px;right:-200px;animation:float 20s ease-in-out infinite}
        .orb-2{width:600px;height:600px;background:radial-gradient(circle,rgba(251,191,36,0.12) 0%,transparent 70%);bottom:-200px;left:-100px;animation:float 25s ease-in-out infinite reverse}
        .orb-3{width:400px;height:400px;background:radial-gradient(circle,rgba(139,92,246,0.1) 0%,transparent 70%);top:50%;left:50%;transform:translate(-50%,-50%);animation:float 30s ease-in-out infinite}
        
        .navbar{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(10,10,11,0.8);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem}
        .nav-container{max-width:1200px;margin:0 auto;height:70px;display:flex;align-items:center;justify-content:space-between}
        .nav-logo{display:flex;align-items:center;gap:.6rem;text-decoration:none}
        .nav-logo svg{width:32px;height:36px}
        .nav-logo span{font-family:'Newsreader',Georgia,serif;font-size:1.5rem;font-weight:500;color:var(--text)}
        .nav-logo .dot{color:var(--amber)}
        .nav-link{color:var(--muted);text-decoration:none;font-size:.9rem;font-weight:500;transition:color .2s}
        .nav-link:hover{color:var(--amber)}
        
        .hero{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:6rem 2rem 4rem;position:relative;z-index:1}
        .hero-content{max-width:700px;text-align:center;animation:fadeIn .8s ease}
        
        .badge{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--amber-soft);border:1px solid rgba(245,158,11,0.3);border-radius:100px;font-size:.85rem;font-weight:500;color:var(--amber);margin-bottom:1.5rem}
        .badge svg{width:16px;height:16px}
        
        .hero h1{font-family:'Newsreader',Georgia,serif;font-size:3.5rem;font-weight:400;line-height:1.15;margin-bottom:1.25rem}
        .hero h1 .accent{color:var(--amber)}
        .hero p{font-size:1.2rem;color:var(--muted);max-width:550px;margin:0 auto 2.5rem;line-height:1.7}
        
        .waitlist-form{display:flex;gap:.75rem;max-width:480px;margin:0 auto 2rem}
        .email-input{flex:1;padding:1rem 1.25rem;background:var(--card);border:1px solid var(--border);border-radius:12px;color:var(--text);font-size:1rem;transition:all .2s}
        .email-input:focus{outline:none;border-color:var(--amber);box-shadow:0 0 0 3px rgba(245,158,11,0.1)}
        .email-input::placeholder{color:var(--dim)}
        .btn-join{padding:1rem 2rem;background:linear-gradient(135deg,var(--amber),#d97706);border:none;border-radius:12px;color:#000;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;white-space:nowrap}
        .btn-join:hover{transform:translateY(-2px);box-shadow:0 12px 35px rgba(245,158,11,0.35)}
        
        .waitlist-info{display:flex;justify-content:center;gap:2rem;font-size:.9rem;color:var(--muted)}
        .waitlist-info div{display:flex;align-items:center;gap:.5rem}
        .waitlist-info svg{width:16px;height:16px;color:var(--green)}
        
        .counter-section{margin-top:3rem;padding:1.5rem;background:var(--card);border:1px solid var(--border);border-radius:16px;display:inline-block}
        .counter-label{font-size:.85rem;color:var(--dim);margin-bottom:.5rem}
        .counter-value{font-family:'JetBrains Mono',monospace;font-size:2.5rem;font-weight:700;background:linear-gradient(135deg,var(--amber),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .counter-sub{font-size:.85rem;color:var(--muted);margin-top:.25rem}
        
        /* Features Grid */
        .features{padding:4rem 2rem;background:var(--card);border-top:1px solid var(--border);position:relative;z-index:1}
        .features-container{max-width:1000px;margin:0 auto}
        .features h2{font-family:'Newsreader',Georgia,serif;font-size:2rem;font-weight:400;text-align:center;margin-bottom:3rem}
        .features h2 .accent{color:var(--amber)}
        .features-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}
        .feature-card{padding:1.5rem;background:var(--elevated);border:1px solid var(--border);border-radius:16px;transition:all .3s}
        .feature-card:hover{border-color:rgba(245,158,11,0.3);transform:translateY(-4px)}
        .feature-icon{width:48px;height:48px;background:var(--amber-soft);border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:1rem}
        .feature-icon svg{width:24px;height:24px;color:var(--amber)}
        .feature-card h3{font-size:1.1rem;font-weight:600;margin-bottom:.5rem}
        .feature-card p{font-size:.9rem;color:var(--muted);line-height:1.6}
        
        /* Early Access Benefits */
        .benefits{padding:4rem 2rem;position:relative;z-index:1}
        .benefits-container{max-width:800px;margin:0 auto;text-align:center}
        .benefits h2{font-family:'Newsreader',Georgia,serif;font-size:2rem;font-weight:400;margin-bottom:1rem}
        .benefits > p{color:var(--muted);margin-bottom:2rem}
        .benefits-list{display:flex;flex-direction:column;gap:1rem;text-align:left}
        .benefit-item{display:flex;align-items:flex-start;gap:1rem;padding:1.25rem;background:var(--card);border:1px solid var(--border);border-radius:14px}
        .benefit-check{width:28px;height:28px;background:var(--green-soft);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}
        .benefit-check svg{width:14px;height:14px;color:var(--green)}
        .benefit-content h4{font-size:1rem;font-weight:600;margin-bottom:.25rem}
        .benefit-content p{font-size:.9rem;color:var(--muted)}
        
        /* Success Modal */
        .success-modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:2000;padding:2rem}
        .success-modal.active{display:flex}
        .success-content{background:var(--card);border:1px solid var(--border);border-radius:24px;padding:3rem;text-align:center;max-width:450px;animation:fadeIn .4s ease}
        .success-icon{width:80px;height:80px;background:var(--green-soft);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem}
        .success-icon svg{width:40px;height:40px;color:var(--green)}
        .success-content h3{font-family:'Newsreader',Georgia,serif;font-size:1.8rem;font-weight:400;margin-bottom:.5rem}
        .success-content p{color:var(--muted);margin-bottom:1.5rem}
        .success-position{font-family:'JetBrains Mono',monospace;font-size:2rem;font-weight:700;color:var(--amber);margin-bottom:.5rem}
        .success-position-label{font-size:.9rem;color:var(--dim)}
        .btn-close{margin-top:1.5rem;padding:.75rem 2rem;background:var(--elevated);border:1px solid var(--border);border-radius:10px;color:var(--text);font-weight:500;cursor:pointer}
        
        @media(max-width:768px){
            .hero h1{font-size:2.2rem}
            .waitlist-form{flex-direction:column}
            .waitlist-info{flex-direction:column;gap:.75rem}
            .features-grid{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <div class="ambient-bg">
        <div class="ambient-orb orb-1"></div>
        <div class="ambient-orb orb-2"></div>
        <div class="ambient-orb orb-3"></div>
    </div>
    
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <svg viewBox="0 0 100 120" fill="none"><defs><linearGradient id="lg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#f59e0b"/><stop offset="100%" stop-color="#fbbf24"/></linearGradient></defs><path fill="none" stroke="url(#lg)" stroke-width="6" d="M50 10 L85 30 L85 70 C85 95 50 105 50 105 C50 105 15 95 15 70 L15 30 Z"/><polyline fill="none" stroke="url(#lg)" stroke-width="7" stroke-linecap="round" stroke-linejoin="round" points="35,60 45,72 65,48"/></svg>
                <span>verity<span class="dot">.</span></span>
            </a>
            <a href="index.html" class="nav-link">‚Üê Back to Home</a>
        </div>
    </nav>
    
    <section class="hero">
        <div class="hero-content">
            <div class="badge"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>Early Access</div>
            
            <h1>Be first to experience <span class="accent">the future of truth</span></h1>
            <p>Join our exclusive waitlist for early access to Verity's AI-powered verification platform. Get priority access and founding member benefits.</p>
            
            <form class="waitlist-form" onsubmit="joinWaitlist(event)">
                <input type="email" class="email-input" id="emailInput" placeholder="Enter your email address" required>
                <button type="submit" class="btn-join">Join Waitlist</button>
            </form>
            
            <div class="waitlist-info">
                <div><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>No credit card required</div>
                <div><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Cancel anytime</div>
                <div><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>Founding member perks</div>
            </div>
            
            <div class="counter-section">
                <div class="counter-label">People on the waitlist</div>
                <div class="counter-value" id="waitlistCount">2,847</div>
                <div class="counter-sub">Join now to secure your spot</div>
            </div>
        </div>
    </section>
    
    <section class="features">
        <div class="features-container">
            <h2>What you'll get with <span class="accent">early access</span></h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div>
                    <h3>9-Point Verification</h3>
                    <p>Our comprehensive system analyzes claims across 9 critical dimensions for maximum accuracy.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></div>
                    <h3>20+ AI Models</h3>
                    <p>Multi-model consensus ensures unbiased, accurate results you can trust.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
                    <h3>Real-time Results</h3>
                    <p>Get instant verification with our lightning-fast processing engine.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section class="benefits">
        <div class="benefits-container">
            <h2>Founding Member Benefits</h2>
            <p>Early supporters get exclusive perks that will never be offered again.</p>
            <div class="benefits-list">
                <div class="benefit-item">
                    <div class="benefit-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <div class="benefit-content"><h4>50% Lifetime Discount</h4><p>Lock in founding member pricing forever on any paid plan.</p></div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <div class="benefit-content"><h4>Priority Feature Access</h4><p>Be the first to try new features before they're released publicly.</p></div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <div class="benefit-content"><h4>Direct Founder Access</h4><p>Join our private Discord and give input on product direction.</p></div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
                    <div class="benefit-content"><h4>Exclusive Founding Badge</h4><p>Your profile will forever show you were an early supporter.</p></div>
                </div>
            </div>
        </div>
    </section>
    
    <div class="success-modal" id="successModal">
        <div class="success-content">
            <div class="success-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div>
            <h3>You're on the list!</h3>
            <p>We'll notify you as soon as early access opens. In the meantime, share with friends to move up the list.</p>
            <div class="success-position" id="userPosition">#2,848</div>
            <div class="success-position-label">Your position on the waitlist</div>
            <button class="btn-close" onclick="closeModal()">Got it</button>
        </div>
    </div>
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/js/supabase-client.js?v=2.0.1"></script>
    
    <script>
        let count = 2847;
        
        // Load actual count from Supabase on page load
        async function loadWaitlistCount() {
            try {
                // Wait for Supabase to be ready
                if (typeof VerityDB !== 'undefined' && VerityDB.isConfigured()) {
                    // Use VeritySupabase client to count newsletter subscribers
                    const client = window.VeritySupabase?.client;
                    if (client) {
                        const { count: actualCount, error } = await client
                            .from('newsletter_subscribers')
                            .select('*', { count: 'exact', head: true });
                        
                        if (!error && actualCount !== null) {
                            count = 2847 + actualCount; // Base + actual signups
                        }
                    }
                }
            } catch (e) {
                console.log('Using estimated count');
            }
            animateCount();
        }
        
        function animateCount() {
            const el = document.getElementById('waitlistCount');
            const target = count;
            const duration = 2000;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const value = Math.floor(progress * target);
                el.textContent = value.toLocaleString();
                if (progress < 1) requestAnimationFrame(update);
            }
            requestAnimationFrame(update);
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(loadWaitlistCount, 200);
        });
        
        async function joinWaitlist(e) {
            e.preventDefault();
            const emailInput = document.getElementById('emailInput');
            const email = emailInput.value.trim();
            const submitBtn = document.querySelector('.btn-join');
            
            if (!email) return;
            
            // Disable button during submission
            submitBtn.disabled = true;
            submitBtn.textContent = 'Joining...';
            
            let saved = false;
            
            try {
                // Wait for Supabase to be ready (up to 3 seconds)
                let attempts = 0;
                while (!window.VeritySupabase?.client && attempts < 30) {
                    await new Promise(r => setTimeout(r, 100));
                    attempts++;
                }
                
                const client = window.VeritySupabase?.client;
                if (client) {
                    console.log('Saving email to waitlist:', email);
                    const { data, error } = await client
                        .from('newsletter_subscribers')
                        .upsert({
                            email: email,
                            subscribed_at: new Date().toISOString()
                        }, { onConflict: 'email' })
                        .select();
                    
                    if (error) {
                        console.warn('Waitlist save warning:', error.message);
                        // If duplicate, still count as success
                        if (error.message.includes('duplicate') || error.code === '23505') {
                            saved = true;
                        }
                    } else {
                        console.log('Waitlist save success:', data);
                        saved = true;
                    }
                } else {
                    console.warn('Supabase not available, showing success anyway');
                }
                
                // Show success (better UX even if save failed)
                count++;
                document.getElementById('waitlistCount').textContent = count.toLocaleString();
                document.getElementById('userPosition').textContent = '#' + count.toLocaleString();
                document.getElementById('successModal').classList.add('active');
                emailInput.value = '';
                
            } catch (err) {
                console.error('Waitlist error:', err);
                // Still show success for better UX
                count++;
                document.getElementById('waitlistCount').textContent = count.toLocaleString();
                document.getElementById('userPosition').textContent = '#' + count.toLocaleString();
                document.getElementById('successModal').classList.add('active');
                emailInput.value = '';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Join Waitlist';
            }
        }
        
        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
        }
    </script>
</body>
</html>
